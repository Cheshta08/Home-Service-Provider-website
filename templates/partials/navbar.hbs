<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- navbar.hbs -->
<style>
    .navbar-brand:hover {
        color: #fff;
        /* White brand color on hover */
    }

    .navbar-toggler-icon {
        background-color: #28a745;
        /* Green color for the toggler icon */
    }

    .navbar-nav .nav-item .nav-link {
        color: #fff;
        transition: color 0.3s;
    }

    .navbar-nav .nav-item.active .nav-link,
    .navbar-nav .nav-item:hover .nav-link {
        color: #28a745;
    }

    .login-btn {
        color: #fff;
        /* White color for login text */
        margin-right: 15px;
        /* Added space between login and signup */
        transition: color 0.3s;
    }

    .login-btn:hover {
        color: #28a745;
    }

    .navbar-dark .navbar-toggler-icon {
        background-color: white;
        /* Change toggler icon color to white */
    }

    .dropdown-toggle::after {
        display: inline-block;
        margin-left: .255em;
        vertical-align: .255em;
        border-radius: :10px;

        border-top: .3em solid white;
        /* Set border color to white */
        border-right: .3em solid transparent;
        border-bottom: 0;
        border-left: .3em solid transparent;
    }
 
.dropdown-menu {
    background-color: #343a40; /* Background color of the dropdown menu */
    border: none; /* Remove default border */
    border-radius: 5px; /* Add border radius */
     position: absolute;
    top: 100%; /* Position below the profile icon */
    left: 0; 
    min-width: 170px;
    /* Remove default padding */
}

/* Styling for dropdown items */
.dropdown-item {
    color: #ffffff; /* Text color */
    padding: 8px 20px; /* Adjust padding as needed */
    border-bottom: 1px solid rgba(255, 255, 255, 0.5); /* Add border between items */
}


/* Last dropdown item should not have bottom border */
.dropdown-item:last-child {
    border-bottom: none;
}

/* Styling for dropdown items */

/* Hover effect on dropdown items */
.dropdown-item:hover {
    background-color: #74787d; /* Change background color on hover */
}

/* Styling for the dropdown toggle */


/* Hover effect on dropdown toggle */


    /* Modal styles */

    #logoutModal {

        display: none;
        /* Hide the modal by default */
        position: fixed;
        /* Position the modal */
        top: 50%;
        /* Center the modal vertically */
        left: 50%;
        /* Center the modal horizontally */
        transform: translate(-50%, -50%);
        /* Center the modal */
        background-color: rgba(0, 0, 0, 0.5);
        /* Modal background color */

        border-radius: 10px;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
        /* Add shadow to the modal */
        z-index: 1000;
        /* Ensure modal appears on top of other content */
    }

    /* Style for the faded background overlay */
    .modal-overlay {
        display: none;
        /* Hide the overlay by default */
        position: fixed;
        /* Position the overlay */
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        /* Semi-transparent black color */
        z-index: 999;
        /* Ensure overlay appears beneath the modal */
    }


    /* Style for the close button */
    .close {
        position: absolute;
        top: 10px;
        right: 10px;
        cursor: pointer;
    }

    /* Additional styles for the modal content */


    .button-container {
        margin-top: 20px;
    }

    .button-container button {
        margin: 0 10px;
    }


    #content {
        background-color: #fefefe;
        margin: 15% auto;
        padding: 20px;
        border: 2px solid #888;
        width: 30%;
        /* Adjust the width as per your requirement */
        max-width: 600px;
        /* Set a maximum width if needed */
        text-align: center;
    }

    .close {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }

    .close:hover,
    .close:focus {
        color: black;
        text-decoration: none;
        cursor: pointer;
    }



    button {
        padding: 10px 20px;
        margin: 0 10px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }
</style>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="index">ProAvail</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/index">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/about">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/contact">Contact Us</a>
                </li>
            </ul>

            <div class="d-flex align-items-center">
                {{#if isAuthenticated}}



                <!-- Display profile icon or user's name -->


                <div class="dropdown" style="margin-right:20px">

                    <a class="dropdown-toggle" href="#" role="button"   id="profileDropdown" data-bs-toggle="dropdown"
                        data-bs-display="static" aria-expanded="false">
                        <img style="width: 35px; height: 35px; border-radius: 50%;" src="https://profile.justdial.com/profileImg?pi=lDggQTDYqmMiSoaiEJ5OtHe1hphNbnPqiQZvJFn83Nc%3D" alt="user photo" class="jsx-dc486fb480ba9f6e headnav_img">
                    </a>

                    <ul class="dropdown-menu" style="margin-top:15px" aria-labelledby="profileDropdown">
                        <li><a class="dropdown-item" href="profile">View Profile</a></li>
                        <li><a class="dropdown-item" href="edit-profile">Edit Profile</a></li>
                        <li><a class="dropdown-item" href="change">Change Password</a></li>
                    </ul>
                </div>
                <button type="button" class="btn btn-outline-success" style="margin-right:20px"
                    id="logoutbtn">LogOut</button>


                {{else}}
                <!-- Display login button -->
                <a href="/login" class="login-btn" style="text-decoration: none;">Login</a>
                <!-- Signup button -->
                <a href="/signup"><button type="button" class="btn btn-outline-success">Sign Up</button></a>
                {{/if}}
            </div>
        </div>
    </div>

</nav>
<div id="logoutModal" class="modal">
    <div class="modal-content" id="content">
        <span class="close ml-auto">&times;</span>
        <p>Are you sure you want to logout?</p>
        <div class="button-container">
            <button id="confirmLogout" class="btn btn-primary">Yes</button>
            <button id="cancelLogout" class="btn btn-primary">No</button>
        </div>
    </div>
</div>

<div id="overlay" class="modal-overlay"></div>
<script>
    var modal = document.getElementById("logoutModal");
    var overlay = document.getElementById("overlay");

    // Get the button that opens the modal
    var logoutButton = document.getElementById("logoutbtn");

    // Get the <span> element that closes the modal
    var closeButton = document.getElementsByClassName("close")[0];

    // When the user clicks the logout button, open the modal
    if(logoutButton)
    {
     logoutButton.onclick = function () {
        modal.style.display = "block";
        overlay.style.display = "block";
        // Add class to body
    }

    // When the user clicks on <span> (x), close the modal
    }
    if(closeButton)
    {

     closeButton.onclick = function () {
        modal.style.display = "none";
        overlay.style.display = "none";
        // Remove class from body
    }
    }
    
    
    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = "none";
            overlay.style.display = "none";
            // Remove class from body
        }
    

    // Handle confirmation of logout
    document.getElementById("confirmLogout").addEventListener("click", function () {
        // Redirect to logout route
        window.location.href = "/logout";
        
    });

    // Handle cancellation of logout
    document.getElementById("cancelLogout").addEventListener("click", function () {
        // Close the modal
        modal.style.display = "none";
        overlay.style.display = "none";
        // Remove class from body
    });
    }
    
    

    // When the user clicks anywhere outside of the modal, close it
    
</script>
